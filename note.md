1. **初始种群 (Initial Population)**:
    - 实现了方案 (b)。
    - 音域范围设定为 S={F3,…,G5}*S*={*F*3,…,*G*5} (MIDI 53-79)。
    - 每段旋律长度严格控制为 4 小节 (4/4 拍，共 16 拍)。
    - 音符时值随机选取，最小单位为八分音符 (0.5 拍)。
2. **遗传算法 (Genetic Algorithm)**:
    - **平台**: Python。
    - **交叉 (Crossover)**: 采用基于时间的交叉点（在小节线处 4.0, 8.0, 12.0 切分），确保生成的子代旋律总时长保持不变。
    - **变异 (Mutation)**: 包含音高变异（随机改变音高）和节奏变异（将长音符切分为两个短音符）。
    - **音乐变换**: 实现了移调 (Transposition)、倒影 (Inversion) 和逆行 (Retrograde) 作为特殊的变异算子。
3. **适应度函数 (Fitness Function)**:
    - **调性 (Scale Adherence)**: 奖励 C 大调音阶内的音符。
    - **音程 (Intervals)**: 奖励平滑的级进 (Step) 和小跳 (Skip)，惩罚大跳 (Leap)。
    - **终止式 (Ending)**: 奖励以主音 (C) 或属音 (G) 结束的旋律。
4. **运行结果**:
    - 程序运行 100 代后，通常能找到适应度极高（甚至满分）的旋律片段。





### 主要改进点

1. 节奏结构奖励 (Rhythmic Structure Bonus)

    :

    - 现在算法会分析第 1 小节和第 3 小节的节奏型。如果它们相似或相同（类似于 A-B-A-C 的常见曲式结构），会给予高额奖励。这能让旋律听起来更有“设计感”而非随机游走。

2. 强拍对齐 (Strong Beat Alignment)

    :

    - 奖励那些落在强拍（第 1、3 拍）上的音符。这有助于建立稳定的律动感。

3. 调性中心起始 (Start Note)

    :

    - 除了结尾，现在也奖励以主音 (C)、属音 (G) 或中音 (E) **开始**的旋律，确立调性色彩。

4. 中音区偏好 (Mid-range Preference)

    :

    - 鼓励音符分布在音域的中间部分，避免过多极高或极低的音，使旋律线更自然。

5. 单调进行惩罚 (Monotonic Run Penalty)

    :

    - 惩罚过长的连续上行或下行音阶（如连续 4 个音一直向上），鼓励旋律线有起伏（波浪状）。